<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 11px;
      color: #000;
      margin: 10mm;
      background: #fff;
    }

    .pass {
      border: 1px solid #000;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .header {
      text-align: center;
      margin-bottom: 12px;
    }

    .company-name {
      font-size: 16px;
      font-weight: bold;
      letter-spacing: 0.5px;
    }

    .title {
      font-size: 14px;
      font-weight: bold;
      margin-top: 4px;
      text-decoration: underline;
    }

    .section {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .section .box {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 8px 10px;
      width: 48%;
      background: #f9f9f9;
    }

    .box h4 {
      margin: 0 0 6px 0;
      font-size: 12px;
      font-weight: bold;
      color: #333;
      border-bottom: 1px solid #ccc;
      padding-bottom: 2px;
    }

    .box p {
      margin: 4px 0;
      font-size: 11px;
    }

    .notes {
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff4e5;
      padding: 8px 10px;
      margin-bottom: 12px;
    }

    .notes h4 {
      margin: 0 0 4px 0;
      font-size: 12px;
      font-weight: bold;
      color: #a85c00;
    }

    .signature {
      text-align: right;
      margin-top: 40px;
    }

    .signature-line {
      width: 200px;
      border-top: 1px solid #000;
      margin-left: auto;
      margin-bottom: 4px;
    }

    .footer {
      margin-top: 14px;
      font-size: 9px;
      color: #666;
      text-align: center;
    }

    .divider {
      border-top: 2px dashed #000;
      margin: 16px 0;
    }

    @media print {
      .pass {
        page-break-inside: avoid;
      }
      .divider {
        page-break-after: avoid;
      }
    }
  </style>
</head>
<body>

{% for copy in "12" %}
<div class="pass">

  <div class="header">
    <div class="company-name">{{ company }}</div>
    <div class="title">PRODUCT ISSUE PASS</div>
  </div>

  <!-- Issue & Product Info -->
  <div class="section">
    <div class="box">
      <h4>Issue Details</h4>
      <p><strong>Issue ID:</strong> {{ slip.id }}</p>
      <p><strong>Product:</strong> {{ slip.product.name }}</p>
      <p><strong>Quantity:</strong> {{ slip.quantity }} {{ slip.product.unit }}</p>
      <p><strong>Issued For:</strong> {{ slip.issue_type }}</p>
    </div>
    <div class="box">
      <h4>Warehouse Info</h4>
      <p><strong>Warehouse:</strong> {{ slip.warehouse.name }}</p>
      <p><strong>Requested By:</strong> {{ slip.requested_by.get_full_name|default:slip.requested_by.username }}</p>
      <p><strong>Requested At:</strong> {{ slip.created_at|date:"d.m.Y H:i" }}</p>
      <p><strong>Approved By:</strong> {{ slip.approved_by.get_full_name|default:slip.approved_by.username }}</p>
      <p><strong>Approved At:</strong> {{ slip.approved_at|date:"d.m.Y H:i" }}</p>
    </div>
  </div>

  <table style="width:100%; border-collapse: collapse; margin-top: 10px;">
    <thead>
      <tr style="background:#f0f0f0;">
        <th style="border:1px solid #000; padding:6px;">#</th>
        <th style="border:1px solid #000; padding:6px;">Product</th>
        <th style="border:1px solid #000; padding:6px;">Quantity</th>
        <th style="border:1px solid #000; padding:6px;">Unit</th>
      </tr>
    </thead>

    <tbody>
      {% for item in items %}
      <tr>
        <td style="border:1px solid #000; padding:6px;">{{ forloop.counter }}</td>
        <td style="border:1px solid #000; padding:6px;">
          {{ item.product.name }}
        </td>
        <td style="border:1px solid #000; padding:6px; text-align:right;">
          {{ item.quantity }}
        </td>
        <td style="border:1px solid #000; padding:6px;">
          {{ item.product.unit }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <br>

  <!-- Additional Notes -->
  <div class="notes">
    <h4>Additional Notes</h4>
    <p>{{ slip.notes|default:"N/A" }}</p>
  </div>

  <!-- Signature -->
  <div class="signature">
    <div class="signature-line"></div>
    <div>Authorised Signature</div>
  </div>

  <!-- Footer -->
  <div class="footer">
    Generated on {{ generated_at|date:"d.m.Y H:i" }}<br/>
    This document authorizes inventory movement from the warehouse.
  </div>

</div>

{% if not forloop.last %}
<div class="divider"></div>
{% endif %}
{% endfor %}

</body>
</html>

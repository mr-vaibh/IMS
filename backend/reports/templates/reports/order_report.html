<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 12px;
    }

    h1 {
      margin-bottom: 4px;
    }

    .meta {
      margin-bottom: 16px;
      color: #444;
      font-size: 11px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      vertical-align: top;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    th {
      background: #f5f5f5;
      font-weight: bold;
      font-size: 11px;
    }

    .right {
      text-align: right;
    }

    .delta-col {
      width: 40px;       /* adjust as needed */
      white-space: nowrap;
    }

    .mono {
      font-family: monospace;
      font-size: 10px;
    }

    .status {
      font-weight: bold;
    }

    .footer {
      margin-top: 24px;
      font-size: 11px;
    }
  </style>
</head>
<body>

<h1>Inventory Order Report</h1>

<div class="meta">
  <strong>Company:</strong> {{ company }}<br/>
  <strong>Generated:</strong> {{ generated_at|date:"Y-m-d H:i" }}
</div>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Product</th>
      <th>Warehouse</th>
      <th class="right delta-col">Delta</th>
      <th>Status</th>
      <th>Reason</th>
      <th>Requested By</th>
      <th>Approved By</th>
    </tr>
  </thead>

  <tbody>
    {% for r in rows %}
    <tr>
      <td>{{ r.created_at|date:"Y-m-d H:i" }}</td>
      <td>{{ r.product__name }}</td>
      <td>{{ r.warehouse__name }}</td>
      <td class="right delta-col">{{ r.delta }}</td>
      <td class="status">{{ r.status }}</td>
      <td>{{ r.reason }}</td>
      <td>{{ r.requested_by__username|default:"—" }}</td>
      <td>{{ r.approved_by__username|default:"—" }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="8" style="text-align:center;color:#777;padding:12px;">
        No order records found
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if signature %}
<div class="footer">
  <hr/>
  <strong>Digitally Validated Report</strong><br/><br/>
  {{ signature.statement }}<br/><br/>
  <strong>Signed by:</strong> {{ signature.signed_by }}<br/>
  <strong>Role:</strong> {{ signature.role }}<br/>
  <strong>Date:</strong> {{ signature.signed_at|date:"Y-m-d H:i" }}
</div>
{% endif %}

</body>
</html>
